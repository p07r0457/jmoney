<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin>

   <extension-point id="pages" name="Bookkeeping Pages" schema="schema/bookkeepingPages.exsd"/>
   <extension-point id="fields" name="Extension Fields in Datastore Objects" schema="schema/fields.exsd"/>
   <extension-point id="propagators" name="Property Propagators" schema="schema/propagators.exsd"/>
   <extension-point id="datastores" name="Datastore Implementations" schema="schema/datastores.exsd"/>
   <extension-point id="validators" name="Change Validators" schema="schema/validators.exsd"/>

   <extension
      point="org.eclipse.core.runtime.products"
      id="product">
      <product
            application="net.sf.jmoney.JMoneyApplication"
            name="JMoney RCP">
         <property
               name="appName"
               value="JMoney RCP"/>
         <property
               name="aboutText"
               value="JMoney RCP&#x0A;&#x0A;Version: 1.0pre2 (20070728)&#x0A;&#x0A;(c) Copyright JMoney contributors and others 2000, 2006.  All rights reserved.&#x0A;Visit http://jmoney.sourceforge.net&#x0A;&#x0A;This product includes software developed by the&#x0A;Eclipse Foundation http://www.eclipse.org/"/>
         <property
               name="aboutImage"
               value="icons/JMoney128.gif"/>
         <property
               name="preferenceCustomization"
               value="plugin_customization.ini"/>
         <property
               name="windowImages"
               value="icons/JMoney16.gif,icons/JMoney32.gif,icons/JMoney128.gif"/>
      </product>          
   </extension>
    
   <extension
         id="JMoneyApplication"
         name="JMoneyName"
         point="org.eclipse.core.runtime.applications">
      <application>
         <run
               class="net.sf.jmoney.JMoneyApplication">
         </run>
      </application>
   </extension>
   
	<extension point="org.eclipse.ui.intro">
		<intro
      		icon="icons/JMoney16.gif"
      		class="net.sf.jmoney.intro.JMoneyIntroPart"
      		id="net.sf.jmoney.intro"/>
		<introProductBinding 
			productId="net.sf.jmoney.product"
			introId="net.sf.jmoney.intro"/>
	</extension>

	<extension
          point="org.eclipse.core.runtime.preferences">
		<initializer class="net.sf.jmoney.JMoneyPreferenceInitializer"/>
	</extension>

	<extension
         point="org.eclipse.ui.perspectives">
      <perspective
            name="JMoney Accounting"
      		icon="icons/JMoney16.gif"
            class="net.sf.jmoney.JMoneyPerspective"
            id="net.sf.jmoney.JMoneyPerspective">
      </perspective>
   </extension>

   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="net.sf.jmoney.handlers.CloseSessionHandler"
            id="net.sf.jmoney.closeSession"
            name="Close Session"/>
      <command
            name="%Commands.newTransaction"
            id="net.sf.jmoney.newTransaction"/>
      <command
            name="%Commands.deleteTransaction"
            id="net.sf.jmoney.deleteTransaction"/>
      <command
            name="%Commands.duplicateTransaction"
            id="net.sf.jmoney.duplicateTransaction"/>
      <command
            name="%Commands.viewTransactionDetails"
            id="net.sf.jmoney.transactionDetails"/>
   </extension>
   
   <extension point="org.eclipse.ui.bindings">
      <key
            commandId="net.sf.jmoney.newTransaction"
            sequence="M1+N"
            schemeId="net.sf.jmoney.accountingAcceleratorConfiguration" />
      <key
            commandId="net.sf.jmoney.deleteTransaction"
 			sequence="M1+D"
            schemeId="net.sf.jmoney.accountingAcceleratorConfiguration"/>
      <key
            commandId="net.sf.jmoney.duplicateTransaction"
            sequence="M1+U"
            schemeId="net.sf.jmoney.accountingAcceleratorConfiguration" />
      <key
            commandId="net.sf.jmoney.transactionDetails"
            sequence="M1+I"
            schemeId="net.sf.jmoney.accountingAcceleratorConfiguration" />
      <scheme
            id="net.sf.jmoney.accountingAcceleratorConfiguration"
            name="JMoney Scheme"
            parentId="org.eclipse.ui.defaultAcceleratorConfiguration">
      </scheme>
   </extension>

<!-- The toolbar contributions are made programatically.  However, there is
a problem with the menu contributions.  They are not appearing when added
programatically so until the problem is resolved, they are added declaratively.

Note that adding items declaratively is an inferior solution because there is
no control over the order.  It should normally only be made when plug-ins contribute
items to an existing menu or toolbar.
-->

<extension point="org.eclipse.ui.menus">
     <menuContribution locationURI="menu:file?after=sessionGroup">
        <command
              commandId="net.sf.jmoney.closeSession"/>
     </menuContribution>

     <menuContribution locationURI="menu:edit?after=additions">
        <command
              commandId="net.sf.jmoney.newTransaction"
              icon="icons/new_entry.GIF"/>
     </menuContribution>

     <menuContribution locationURI="menu:edit?after=additions">
        <command
              commandId="net.sf.jmoney.deleteTransaction"
              icon="icons/delete_entry.GIF"/>
     </menuContribution>

     <menuContribution locationURI="menu:edit?after=additions">
        <command
              commandId="net.sf.jmoney.duplicateTransaction"
              icon="icons/duplicate_entry.GIF"/>
     </menuContribution>

     <menuContribution locationURI="menu:navigate?after=openEditors">
        <command
              commandId="net.sf.jmoney.transactionDetails"
              icon="icons/view_transaction.GIF"/>
     </menuContribution>
</extension>

	<extension point="org.eclipse.ui.newWizards">
		<wizard
        category="net.sf.jmoney.wizards.newAccounts"
        class="net.sf.jmoney.wizards.NewAccountWizard"
        id="net.sf.jmoney.wizards.new.bankaccount"
        name="Bank Account">
			<description>
				Create a new Bank Account. 
			</description>
		</wizard>
	</extension>
 

<!-- Update Actions -->
   <extension
         point="org.eclipse.ui.actionSets">
      <actionSet
            label="%UpdateActionSet.label"
            visible="true"
            id="net.sf.jmoney.softwareUpdates">
         <menu
               label="%UpdateActionSet.menu.label"
               path="help/group.updates"
               id="net.sf.jmoney.updateMenu">
            <separator
                  name="group0">
            </separator>
            <separator
                  name="group1">
            </separator>
         </menu>
      </actionSet>
   </extension>

   <extension
         point="org.eclipse.help.toc">
      <toc
            file="toc.xml">
      </toc>
      <toc
            file="testToc.xml"
            primary="true">
      </toc>
   </extension>

   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            name="Preferences"
            class="net.sf.jmoney.preferences.PreferencePage"
            id="net.sf.jmoney.preferences.PreferencePage">
      </page>
   </extension>

   <extension 
   		 point="org.eclipse.ui.views">
      <view
            id="net.sf.jmoney.views.NavigationView"
            name="Navigation"
            icon="icons/accounts.gif"
            class="net.sf.jmoney.views.NavigationView">
      </view>
   </extension>

   <extension
         point="org.eclipse.ui.editors">
      <editor
            id="net.sf.jmoney.genericEditor"
            name="Generic Node Editor"
            icon="icons/sample.gif"
            class="net.sf.jmoney.views.NodeEditor">
      </editor>
   </extension>

   <extension
         point="org.eclipse.ui.elementFactories">
        <factory 
           id ="net.sf.jmoney.nodeEditor" 
           class="net.sf.jmoney.views.NodeEditorFactory">
        </factory> 
        <factory 
           id ="net.sf.jmoney.sessionEditor" 
           class="net.sf.jmoney.views.SessionEditorFactory">
        </factory> 
   </extension>

   <extension
         point="net.sf.jmoney.pages">
         
      <node
          id="capitalAccounts"
	      label="%NavigationTreeModel.accounts"
    	  icon="icons/accounts.gif"
    	  position="100"
    	  class="net.sf.jmoney.views.AccountsNode">
      </node>

      <node
          id="categoriesNode"
	      label="%NavigationTreeModel.categories"
    	  icon="icons/category.gif"
    	  position="200"
    	  class="net.sf.jmoney.views.CategoriesNode">
      </node>

      <pages
            class="net.sf.jmoney.pages.entries.EntriesBookkeepingPage"
            extendable-property-set="net.sf.jmoney.currencyAccount"
            id="entries"
            position="1">
      </pages>

      <pages
            class="net.sf.jmoney.pages.entries.EntriesBookkeepingPage"
            extendable-property-set="net.sf.jmoney.categoryAccount"
            id="categoryEntries"
            position="1">
      </pages>
   </extension>
   
   <extension
         point="net.sf.jmoney.fields">
      <extendable-property-set
      	id="session"
          info-class="net.sf.jmoney.model2.SessionInfo">
      </extendable-property-set>
      <extendable-property-set
      	id="commodity"
          info-class="net.sf.jmoney.model2.CommodityInfo">
      </extendable-property-set>
      <extendable-property-set
      	id="currency"
          info-class="net.sf.jmoney.model2.CurrencyInfo"
          base-property-set="net.sf.jmoney.commodity">
      </extendable-property-set>
      <extendable-property-set
      	id="account"
          info-class="net.sf.jmoney.model2.AccountInfo">
      </extendable-property-set>
      <extendable-property-set
      	id="categoryAccount"
          info-class="net.sf.jmoney.model2.IncomeExpenseAccountInfo"
          base-property-set="net.sf.jmoney.account">
      </extendable-property-set>
      <extendable-property-set
      	id="capitalAccount"
          info-class="net.sf.jmoney.model2.CapitalAccountInfo"
          base-property-set="net.sf.jmoney.account">
      </extendable-property-set>
      <extendable-property-set
      	id="currencyAccount"
          info-class="net.sf.jmoney.model2.CurrencyAccountInfo"
          base-property-set="net.sf.jmoney.capitalAccount">
      </extendable-property-set>
      <extendable-property-set
      	id="bankAccount"
          info-class="net.sf.jmoney.model2.BankAccountInfo"
          base-property-set="net.sf.jmoney.currencyAccount">
      </extendable-property-set>
      <extendable-property-set
      	id="transaction"
          info-class="net.sf.jmoney.model2.TransactionInfo">
      </extendable-property-set>
      <extendable-property-set
      	id="entry"
          info-class="net.sf.jmoney.model2.EntryInfo">
      </extendable-property-set>
   </extension>

</plugin>
